<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êô∫ËÉΩÁΩëÁõòÁõ¥ÈìæËΩ¨Êç¢Âô®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .background-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .floating-shape:nth-child(1) {
            width: 100px;
            height: 100px;
            top: 20%;
            left: 20%;
            animation-delay: 0s;
        }

        .floating-shape:nth-child(2) {
            width: 150px;
            height: 150px;
            top: 60%;
            right: 20%;
            animation-delay: 2s;
        }

        .floating-shape:nth-child(3) {
            width: 80px;
            height: 80px;
            bottom: 20%;
            left: 30%;
            animation-delay: 4s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
            animation: slideUp 0.8s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            font-weight: 400;
        }

        .platform-indicators {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .platform-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .platform-badge:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-wrapper {
            position: relative;
            margin-bottom: 20px;
        }

        .input-field {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .input-field:focus {
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .convert-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.3);
        }

        .convert-btn:active {
            transform: translateY(0);
        }

        .convert-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .convert-btn:hover::before {
            left: 100%;
        }

        .result-section {
            margin-top: 30px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .result-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-wrapper {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .result-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .result-link {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            word-break: break-all;
            margin-bottom: 15px;
            position: relative;
        }

        .copy-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .test-btn {
            background: rgba(76, 175, 80, 0.2);
            color: white;
            border: 1px solid rgba(76, 175, 80, 0.5);
            border-radius: 10px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .test-btn:hover {
            background: rgba(76, 175, 80, 0.3);
            transform: translateY(-1px);
        }

        .detection-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }

        .detection-info h3 {
            color: white;
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .detection-info p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .error-message {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.5);
            border-radius: 12px;
            padding: 15px;
            color: white;
            margin-top: 15px;
            border-left: 4px solid #f44336;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                margin: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .platform-indicators {
                gap: 10px;
            }

            .platform-badge {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="background-animation">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üîó Êô∫ËÉΩÁõ¥ÈìæËΩ¨Êç¢Âô®</h1>
            <p>ÊîØÊåÅ‰∏ªÊµÅÁΩëÁõòÂàÜ‰∫´ÈìæÊé•‰∏ÄÈîÆËΩ¨Êç¢‰∏∫Áõ¥Êé•‰∏ãËΩΩÈìæÊé•</p>
        </div>

        <div class="platform-indicators">
            <div class="platform-badge">Google Drive</div>
            <div class="platform-badge">OneDrive</div>
            <div class="platform-badge">Dropbox</div>
            <div class="platform-badge">ÁôæÂ∫¶ÁΩëÁõò</div>
            <div class="platform-badge">ËìùÂ•è‰∫ë</div>
        </div>

        <div class="input-section">
            <div class="input-wrapper">
                <input type="text" class="input-field" id="shareLink" placeholder="ËØ∑Á≤òË¥¥ÁΩëÁõòÂàÜ‰∫´ÈìæÊé•...">
            </div>
            <button class="convert-btn" onclick="convertLink()">
                <span id="convertText">üöÄ Êô∫ËÉΩËΩ¨Êç¢</span>
            </button>
        </div>

        <div class="result-section" id="resultSection">
            <div id="detectionInfo" class="detection-info" style="display: none;">
                <h3 id="detectedPlatform"></h3>
                <p id="detectedType"></p>
            </div>

            <div class="result-wrapper">
                <div class="result-label">Áõ¥Êé•‰∏ãËΩΩÈìæÊé•Ôºö</div>
                <div class="result-link" id="resultLink"></div>
                <button class="copy-btn" onclick="copyToClipboard()">üìã Â§çÂà∂ÈìæÊé•</button>
                <button class="test-btn" onclick="testLink()">üîç ÊµãËØïÈìæÊé•</button>
            </div>
        </div>

        <div id="errorMessage" class="error-message" style="display: none;"></div>

        <div class="footer">
            <p>üí° ÊîØÊåÅËá™Âä®ËØÜÂà´ÁΩëÁõòÁ±ªÂûã ‚Ä¢ ‰∏ÄÈîÆËΩ¨Êç¢ ‚Ä¢ ÂÆâÂÖ®ÂèØÈù†</p>
        </div>
    </div>

    <script>
        // ÁΩëÁõòÂπ≥Âè∞ÈÖçÁΩÆ
        const platforms = {
            'drive.google.com': {
                name: 'Google Drive',
                icon: 'üóÇÔ∏è',
                patterns: [
                    {
                        regex: /drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/,
                        converter: (match) => `https://drive.google.com/uc?export=download&id=${match[1]}`
                    }
                ]
            },
            'onedrive.live.com': {
                name: 'OneDrive',
                icon: '‚òÅÔ∏è',
                patterns: [
                    {
                        regex: /onedrive\.live\.com.*resid=([^&]+)/,
                        converter: (match) => {
                            const resid = match[1];
                            return `https://onedrive.live.com/download?resid=${resid}`;
                        }
                    },
                    {
                        regex: /1drv\.ms\/[a-zA-Z]\/([a-zA-Z0-9_-]+)/,
                        converter: (match) => `https://onedrive.live.com/download?cid=${match[1]}`
                    }
                ]
            },
            'dropbox.com': {
                name: 'Dropbox',
                icon: 'üì¶',
                patterns: [
                    {
                        regex: /dropbox\.com\/s\/([a-zA-Z0-9_-]+)/,
                        converter: (match, originalUrl) => originalUrl.replace('dropbox.com', 'dl.dropboxusercontent.com').replace('?dl=0', '').replace('?dl=1', '')
                    },
                    {
                        regex: /dropbox\.com\/scl\/fi\/([^?]+)/,
                        converter: (match, originalUrl) => originalUrl.replace('dropbox.com', 'dl.dropboxusercontent.com').replace('?dl=0', '').replace('?dl=1', '')
                    }
                ]
            },
            'pan.baidu.com': {
                name: 'ÁôæÂ∫¶ÁΩëÁõò',
                icon: 'üíæ',
                patterns: [
                    {
                        regex: /pan\.baidu\.com\/s\/([a-zA-Z0-9_-]+)/,
                        converter: (match) => {
                            return `‚ö†Ô∏è ÁôæÂ∫¶ÁΩëÁõòÈúÄË¶ÅÊèêÂèñÁ†ÅÔºåÂª∫ËÆÆ‰ΩøÁî®ÂÖ∂‰ªñÂ∑•ÂÖ∑Ëé∑ÂèñÁõ¥Èìæ`;
                        }
                    }
                ]
            },
            'lanzou.com': {
                name: 'ËìùÂ•è‰∫ë',
                icon: 'üå•Ô∏è',
                patterns: [
                    {
                        regex: /lanzou[a-z]?\.com\/([a-zA-Z0-9_-]+)/,
                        converter: (match, originalUrl) => {
                            return `‚ö†Ô∏è ËìùÂ•è‰∫ëÈúÄË¶ÅËß£ÊûêÈ°µÈù¢Ëé∑ÂèñÁúüÂÆû‰∏ãËΩΩÈìæÊé•`;
                        }
                    }
                ]
            }
        };

        let currentResult = '';

        function convertLink() {
            const input = document.getElementById('shareLink');
            const url = input.value.trim();
            const convertBtn = document.querySelector('.convert-btn');
            const convertText = document.getElementById('convertText');
            const resultSection = document.getElementById('resultSection');
            const errorMessage = document.getElementById('errorMessage');
            const detectionInfo = document.getElementById('detectionInfo');

            // Ê∏ÖÈô§‰πãÂâçÁöÑÁªìÊûú
            errorMessage.style.display = 'none';
            resultSection.classList.remove('show');
            detectionInfo.style.display = 'none';

            if (!url) {
                showError('ËØ∑ËæìÂÖ•ÁΩëÁõòÂàÜ‰∫´ÈìæÊé•');
                return;
            }

            // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
            convertText.innerHTML = '<span class="loading"></span>ËΩ¨Êç¢‰∏≠...';
            convertBtn.disabled = true;

            // Ê®°ÊãüËΩ¨Êç¢ËøáÁ®ã
            setTimeout(() => {
                try {
                    const result = processLink(url);
                    if (result.success) {
                        showResult(result);
                    } else {
                        showError(result.error);
                    }
                } catch (error) {
                    showError('ËΩ¨Êç¢Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÈìæÊé•Ê†ºÂºè');
                }

                // ÊÅ¢Â§çÊåâÈíÆÁä∂ÊÄÅ
                convertText.innerHTML = 'üöÄ Êô∫ËÉΩËΩ¨Êç¢';
                convertBtn.disabled = false;
            }, 1000);
        }

        function processLink(url) {
            // Ê£ÄÊµãÂπ≥Âè∞
            for (const [domain, platform] of Object.entries(platforms)) {
                if (url.includes(domain)) {
                    // Â∞ùËØïÂåπÈÖçÊ®°Âºè
                    for (const pattern of platform.patterns) {
                        const match = url.match(pattern.regex);
                        if (match) {
                            const directLink = pattern.converter(match, url);
                            return {
                                success: true,
                                platform: platform.name,
                                icon: platform.icon,
                                directLink: directLink,
                                originalUrl: url
                            };
                        }
                    }
                }
            }

            return {
                success: false,
                error: 'ÊöÇ‰∏çÊîØÊåÅËØ•ÁΩëÁõòÊàñÈìæÊé•Ê†ºÂºè‰∏çÊ≠£Á°Æ'
            };
        }

        function showResult(result) {
            const resultSection = document.getElementById('resultSection');
            const resultLink = document.getElementById('resultLink');
            const detectionInfo = document.getElementById('detectionInfo');
            const detectedPlatform = document.getElementById('detectedPlatform');
            const detectedType = document.getElementById('detectedType');

            // ÊòæÁ§∫Ê£ÄÊµã‰ø°ÊÅØ
            detectedPlatform.textContent = `${result.icon} ${result.platform}`;
            detectedType.textContent = 'Â∑≤Ëá™Âä®ËØÜÂà´Âπ≥Âè∞Âπ∂ËΩ¨Êç¢‰∏∫Áõ¥Èìæ';
            detectionInfo.style.display = 'block';

            // ÊòæÁ§∫ÁªìÊûú
            resultLink.textContent = result.directLink;
            currentResult = result.directLink;

            resultSection.classList.add('show');
        }

        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
        }

        function copyToClipboard() {
            if (currentResult) {
                navigator.clipboard.writeText(currentResult).then(() => {
                    const copyBtn = document.querySelector('.copy-btn');
                    const originalText = copyBtn.textContent;
                    copyBtn.textContent = '‚úÖ Â∑≤Â§çÂà∂';
                    copyBtn.style.background = 'rgba(76, 175, 80, 0.3)';

                    setTimeout(() => {
                        copyBtn.textContent = originalText;
                        copyBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                    }, 2000);
                });
            }
        }

        function testLink() {
            if (currentResult) {
                if (currentResult.startsWith('‚ö†Ô∏è')) {
                    alert('ËØ•ÈìæÊé•ÈúÄË¶ÅÈ¢ùÂ§ñÂ§ÑÁêÜÔºåÊó†Ê≥ïÁõ¥Êé•ÊµãËØï');
                    return;
                }

                const testBtn = document.querySelector('.test-btn');
                const originalText = testBtn.textContent;
                testBtn.textContent = 'üîç ÊµãËØï‰∏≠...';

                // Âú®Êñ∞Á™óÂè£‰∏≠ÊâìÂºÄÈìæÊé•ËøõË°åÊµãËØï
                window.open(currentResult, '_blank');

                setTimeout(() => {
                    testBtn.textContent = originalText;
                }, 2000);
            }
        }

        // ÊîØÊåÅÂõûËΩ¶ÈîÆËΩ¨Êç¢
        document.getElementById('shareLink').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                convertLink();
            }
        });

        // Ëá™Âä®Á≤òË¥¥ÂäüËÉΩ
        document.getElementById('shareLink').addEventListener('focus', function () {
            if (this.value === '') {
                navigator.clipboard.readText().then(text => {
                    if (text && (text.includes('drive.google.com') || text.includes('onedrive.live.com') || text.includes('dropbox.com') || text.includes('pan.baidu.com') || text.includes('lanzou'))) {
                        this.value = text;
                    }
                }).catch(() => {
                    // ÈùôÈªòÂ§±Ë¥•
                });
            }
        });
    </script>
</body>

</html>